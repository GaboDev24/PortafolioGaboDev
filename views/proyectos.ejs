<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GaboDev</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Header -->
  <div class="header_cont">
    <header>
    <a href="https://portafolio-gabo-dev.vercel.app/">
      <img src="/img/logo.png" alt="Logo" class="logo">
    </a>
      <!-- Botón hamburguesa -->
      <button class="menu-toggle" aria-label="Abrir menú">
        <i class="fa-solid fa-bars"></i>
      </button>
      <nav>
        <a href="https://gabodevclient.vercel.app/" class="btn-header">¡Contáctame!</a>
        <a href="https://portafolio-gabo-dev.vercel.app/#habilidades" class="btn-header">Habilidades</a>
        <a href="https://portafolio-gabo-dev.vercel.app/#conocimientos" class="btn-header">Conocimientos</a>
        <a href="#footer" class="btn-header">Otros contactos</a>
      </nav>    
    </header>
  </div>
  <!-- overlay -->
  <div class="overlay"></div>
  <!-- Proyectos -->
  <main>
    <h1 class="all-projects"> Todos mis proyectos </h1>
    <section class="proyectos" id="proyectos">
      <h2>Proyectos de Programación</h2>
      <div class="cards">
        <% proyectos.filter(p => p.tipo === 'programacion').forEach(proyecto => { %>
          <div class="card">
            <h3><%= proyecto.titulo %></h3>

            <% if (proyecto.imagen) { %>
              <img src="<%= proyecto.imagen %>" alt="<%= proyecto.titulo %>" style="width:100%; border-radius:8px; margin-bottom:10px;">
            <% } %>

            <% if (proyecto.link) { %>
              <a href="<%= proyecto.link %>" target="_blank" class="btn-ver">Ver proyecto</a>
            <% } %>
          </div>
        <% }) %>
      </div>
    </section>
    <section class="proyectos" id="Diseno">
      <h2>Diseño Gráfico</h2>
      <div class="carrusel">
        <% proyectos.filter(p => p.tipo === 'diseno').forEach(proyecto => { %>
          <div class="slide">
            <img src="<%= proyecto.imagen %>" 
                alt="<%= proyecto.titulo %>" 
                data-img="<%= proyecto.imagen %>" 
                class="carrusel-img">
            <p><%= proyecto.titulo %></p>
          </div>
        <% }) %>
      </div>
    </section>

    <!-- Modal de imagen -->
    <div id="modal" class="modal">
      <span class="cerrar">&times;</span>
      <img class="modal-contenido" id="modal-img">
    </div>
    <section class="proyectos" id="edicion">
      <h2>Edición de Videos</h2>
      <div class="cards">
        <% proyectos.filter(p => p.tipo === 'video').forEach(proyecto => { %>
          <div class="card">
            <h3><%= proyecto.titulo %></h3>
            
            <% if (proyecto.link) { %>
              <!-- Miniatura de YouTube -->
              <% 
                function getYouTubeId(url) {
                  let videoId = "";
                  if (url.includes("youtube.com/watch?v=")) {
                    videoId = url.split("v=")[1].split("&")[0];
                  } else if (url.includes("youtu.be/")) {
                    videoId = url.split("youtu.be/")[1].split("?")[0];
                  } else if (url.includes("youtube.com/shorts/")) {
                    videoId = url.split("shorts/")[1].split("?")[0];
                  } else if (url.includes("youtube.com/embed/")) {
                    videoId = url.split("embed/")[1].split("?")[0];
                  }
                  return videoId;
                }
              %>

              <a href="<%= proyecto.link %>" target="_blank">
                <img 
                  src="https://img.youtube.com/vi/<%= getYouTubeId(proyecto.link) %>/hqdefault.jpg" 
                  alt="<%= proyecto.titulo %>" 
                  style="width:100%; border-radius:8px;"
                >
              </a>
            <% } %>
          </div>
        <% }) %>
      </div>
    </section>
  </main>

  <footer id="footer">
    <h1 class="footer-h1">
      Tambien podes contactarme en:
    </h1>
    <a href="https://github.com/GaboDev24" class="redes-btn" target="_blank">
      <i class="fa-brands fa-github" class="redes-icon"></i> GitHub
    </a>
    <a href="mailto:gabodev240402@gmail.com" class="redes-btn" target="_blank">
      <i class="fa-brands fa-google" class="redes-icon"></i> Mail
    </a>
    <a href="https://www.instagram.com/gabodev24/" class="redes-btn" target="_blank">
      <i class="fa-brands fa-instagram" class="redes-icon"></i> Instagram
    </a>
    <a href="https://discordapp.com/users/gabodev24_" class="redes-btn" target="_blank">
      <i class="fa-brands fa-discord" class="redes-icon"></i> Discord
    </a>
  </footer>
<script>
  window.addEventListener('load', () => {
    const intro = document.getElementById('intro');
    setTimeout(() => {
      intro.classList.add('hidden'); // fade out
      setTimeout(() => intro.remove(), 1000);
    }, 1500); 
  });

  const modal = document.getElementById("modal");
  const modalImg = document.getElementById("modal-img");
  const closeBtn = document.querySelector(".cerrar"); // ✅ ahora selecciona bien la X

  // Abrir modal con zoomIn
  document.querySelectorAll(".carrusel-img").forEach(img => {
    img.addEventListener("click", () => {
      modal.style.display = "flex";
      modalImg.src = img.dataset.img;

      modalImg.classList.remove("zoomOut");
      void modalImg.offsetWidth; // hack para reiniciar animación
      modalImg.classList.add("zoomIn");
    });
  });

  // Función cerrar con animación
  function cerrarModal() {
    modalImg.classList.remove("zoomIn");
    modalImg.classList.add("zoomOut");

    modalImg.addEventListener("animationend", () => {
      if (modalImg.classList.contains("zoomOut")) {
        modal.style.display = "none";
        modalImg.src = "";
      }
    }, { once: true });
  }

  // Cerrar con la X
  closeBtn.addEventListener("click", cerrarModal);

  // Cerrar clickeando fuera de la imagen
  modal.addEventListener("click", e => {
    if (e.target === modal) {
      cerrarModal();
    }
  });
</script>
<script src="/js/menu.js"></script>
</body>
</html>
